<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
    <title>Reference</title>
    <link rel="stylesheet" href="../../../../../luadoc.css" type="text/css" />
	<!--meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/-->
</head>

<body>
<div id="container">

<div id="product">
	<div id="product_logo"></div>
	<div id="product_name"><big><b></b></big></div>
	<div id="product_description"></div>
</div> <!-- id="product" -->

<div id="main">

<div id="navigation">


<h1>LuaDoc</h1>
<ul>
	
	<li><a href="../../../../../index.html">Index</a></li>
	
</ul>


<!-- Module list -->



<!-- File list -->

<h1>Files</h1>
<ul>

	<li>
		<a href="../../../../../files/data/lipsofsuna/scripts/common/bitwise.html">data/lipsofsuna/scripts/common/bitwise.lua</a>
	</li>

	<li>
		<a href="../../../../../files/data/lipsofsuna/scripts/common/color.html">data/lipsofsuna/scripts/common/color.lua</a>
	</li>

	<li>
		<a href="../../../../../files/data/lipsofsuna/scripts/common/crafting.html">data/lipsofsuna/scripts/common/crafting.lua</a>
	</li>

	<li>
		<a href="../../../../../files/data/lipsofsuna/scripts/common/dialogspec.html">data/lipsofsuna/scripts/common/dialogspec.lua</a>
	</li>

	<li>
		<a href="../../../../../files/data/lipsofsuna/scripts/common/effect.html">data/lipsofsuna/scripts/common/effect.lua</a>
	</li>

	<li>
		<a href="../../../../../files/data/lipsofsuna/scripts/common/faction.html">data/lipsofsuna/scripts/common/faction.lua</a>
	</li>

	<li>
		<a href="../../../../../files/data/lipsofsuna/scripts/common/feat.html">data/lipsofsuna/scripts/common/feat.lua</a>
	</li>

	<li>
		<a href="../../../../../files/data/lipsofsuna/scripts/common/iconspec.html">data/lipsofsuna/scripts/common/iconspec.lua</a>
	</li>

	<li>
		<a href="../../../../../files/data/lipsofsuna/scripts/common/influencespec.html">data/lipsofsuna/scripts/common/influencespec.lua</a>
	</li>

	<li><strong>data/lipsofsuna/scripts/common/inventory.lua</strong></li>
	
	<li>
		<a href="../../../../../files/data/lipsofsuna/scripts/common/itemspec.html">data/lipsofsuna/scripts/common/itemspec.lua</a>
	</li>

	<li>
		<a href="../../../../../files/data/lipsofsuna/scripts/common/marker.html">data/lipsofsuna/scripts/common/marker.lua</a>
	</li>

	<li>
		<a href="../../../../../files/data/lipsofsuna/scripts/common/material.html">data/lipsofsuna/scripts/common/material.lua</a>
	</li>

	<li>
		<a href="../../../../../files/data/lipsofsuna/scripts/common/model.html">data/lipsofsuna/scripts/common/model.lua</a>
	</li>

	<li>
		<a href="../../../../../files/data/lipsofsuna/scripts/common/names.html">data/lipsofsuna/scripts/common/names.lua</a>
	</li>

	<li>
		<a href="../../../../../files/data/lipsofsuna/scripts/common/object.html">data/lipsofsuna/scripts/common/object.lua</a>
	</li>

	<li>
		<a href="../../../../../files/data/lipsofsuna/scripts/common/obstaclespec.html">data/lipsofsuna/scripts/common/obstaclespec.lua</a>
	</li>

	<li>
		<a href="../../../../../files/data/lipsofsuna/scripts/common/pattern.html">data/lipsofsuna/scripts/common/pattern.lua</a>
	</li>

	<li>
		<a href="../../../../../files/data/lipsofsuna/scripts/common/protocol.html">data/lipsofsuna/scripts/common/protocol.lua</a>
	</li>

	<li>
		<a href="../../../../../files/data/lipsofsuna/scripts/common/quest.html">data/lipsofsuna/scripts/common/quest.lua</a>
	</li>

	<li>
		<a href="../../../../../files/data/lipsofsuna/scripts/common/regionspec.html">data/lipsofsuna/scripts/common/regionspec.lua</a>
	</li>

	<li>
		<a href="../../../../../files/data/lipsofsuna/scripts/common/sectors.html">data/lipsofsuna/scripts/common/sectors.lua</a>
	</li>

	<li>
		<a href="../../../../../files/data/lipsofsuna/scripts/common/serialize.html">data/lipsofsuna/scripts/common/serialize.lua</a>
	</li>

	<li>
		<a href="../../../../../files/data/lipsofsuna/scripts/common/settings.html">data/lipsofsuna/scripts/common/settings.lua</a>
	</li>

	<li>
		<a href="../../../../../files/data/lipsofsuna/scripts/common/skills.html">data/lipsofsuna/scripts/common/skills.lua</a>
	</li>

	<li>
		<a href="../../../../../files/data/lipsofsuna/scripts/common/spec.html">data/lipsofsuna/scripts/common/spec.lua</a>
	</li>

	<li>
		<a href="../../../../../files/data/lipsofsuna/scripts/common/species.html">data/lipsofsuna/scripts/common/species.lua</a>
	</li>

	<li>
		<a href="../../../../../files/data/lipsofsuna/scripts/common/vision.html">data/lipsofsuna/scripts/common/vision.lua</a>
	</li>

	<li>
		<a href="../../../../../files/data/lipsofsuna/scripts/common/voxel.html">data/lipsofsuna/scripts/common/voxel.lua</a>
	</li>

	<li>
		<a href="../../../../../files/data/system/ai.html">data/system/ai.lua</a>
	</li>

	<li>
		<a href="../../../../../files/data/system/animation.html">data/system/animation.lua</a>
	</li>

	<li>
		<a href="../../../../../files/data/system/camera.html">data/system/camera.lua</a>
	</li>

	<li>
		<a href="../../../../../files/data/system/class.html">data/system/class.lua</a>
	</li>

	<li>
		<a href="../../../../../files/data/system/config-file.html">data/system/config-file.lua</a>
	</li>

	<li>
		<a href="../../../../../files/data/system/core.html">data/system/core.lua</a>
	</li>

	<li>
		<a href="../../../../../files/data/system/database.html">data/system/database.lua</a>
	</li>

	<li>
		<a href="../../../../../files/data/system/eventhandler.html">data/system/eventhandler.lua</a>
	</li>

	<li>
		<a href="../../../../../files/data/system/file.html">data/system/file.lua</a>
	</li>

	<li>
		<a href="../../../../../files/data/system/graphics.html">data/system/graphics.lua</a>
	</li>

	<li>
		<a href="../../../../../files/data/system/keysym.html">data/system/keysym.lua</a>
	</li>

	<li>
		<a href="../../../../../files/data/system/lobby.html">data/system/lobby.lua</a>
	</li>

	<li>
		<a href="../../../../../files/data/system/math.html">data/system/math.lua</a>
	</li>

	<li>
		<a href="../../../../../files/data/system/model.html">data/system/model.lua</a>
	</li>

	<li>
		<a href="../../../../../files/data/system/network.html">data/system/network.lua</a>
	</li>

	<li>
		<a href="../../../../../files/data/system/noise.html">data/system/noise.lua</a>
	</li>

	<li>
		<a href="../../../../../files/data/system/object-physics.html">data/system/object-physics.lua</a>
	</li>

	<li>
		<a href="../../../../../files/data/system/object-render.html">data/system/object-render.lua</a>
	</li>

	<li>
		<a href="../../../../../files/data/system/object.html">data/system/object.lua</a>
	</li>

	<li>
		<a href="../../../../../files/data/system/physics.html">data/system/physics.lua</a>
	</li>

	<li>
		<a href="../../../../../files/data/system/reload.html">data/system/reload.lua</a>
	</li>

	<li>
		<a href="../../../../../files/data/system/render.html">data/system/render.lua</a>
	</li>

	<li>
		<a href="../../../../../files/data/system/skeleton.html">data/system/skeleton.lua</a>
	</li>

	<li>
		<a href="../../../../../files/data/system/sound.html">data/system/sound.lua</a>
	</li>

	<li>
		<a href="../../../../../files/data/system/speech.html">data/system/speech.lua</a>
	</li>

	<li>
		<a href="../../../../../files/data/system/thread.html">data/system/thread.lua</a>
	</li>

	<li>
		<a href="../../../../../files/data/system/tiles-physics.html">data/system/tiles-physics.lua</a>
	</li>

	<li>
		<a href="../../../../../files/data/system/tiles-render.html">data/system/tiles-render.lua</a>
	</li>

	<li>
		<a href="../../../../../files/data/system/tiles.html">data/system/tiles.lua</a>
	</li>

	<li>
		<a href="../../../../../files/data/system/timer.html">data/system/timer.lua</a>
	</li>

	<li>
		<a href="../../../../../files/data/system/widgets.html">data/system/widgets.lua</a>
	</li>

	<li>
		<a href="../../../../../files/data/system/widgets/button.html">data/system/widgets/button.lua</a>
	</li>

	<li>
		<a href="../../../../../files/data/system/widgets/combo.html">data/system/widgets/combo.lua</a>
	</li>

	<li>
		<a href="../../../../../files/data/system/widgets/cursor.html">data/system/widgets/cursor.lua</a>
	</li>

	<li>
		<a href="../../../../../files/data/system/widgets/entry.html">data/system/widgets/entry.lua</a>
	</li>

	<li>
		<a href="../../../../../files/data/system/widgets/frame.html">data/system/widgets/frame.lua</a>
	</li>

	<li>
		<a href="../../../../../files/data/system/widgets/label.html">data/system/widgets/label.lua</a>
	</li>

	<li>
		<a href="../../../../../files/data/system/widgets/list.html">data/system/widgets/list.lua</a>
	</li>

	<li>
		<a href="../../../../../files/data/system/widgets/menuitem.html">data/system/widgets/menuitem.lua</a>
	</li>

	<li>
		<a href="../../../../../files/data/system/widgets/scrollbar.html">data/system/widgets/scrollbar.lua</a>
	</li>

	<li>
		<a href="../../../../../files/data/system/widgets/toggle.html">data/system/widgets/toggle.lua</a>
	</li>

	<li>
		<a href="../../../../../files/data/system/widgets/widgets.html">data/system/widgets/widgets.lua</a>
	</li>

</ul>






</div> <!-- id="navigation" -->

<div id="content">

<h1>File <code>data/lipsofsuna/scripts/common/inventory.lua</code></h1>







<h2>Functions</h2>
<table class="function_list">

	<tr>
	<td class="name" nowrap><a href="#Inventory.find">Inventory.find</a>&nbsp;(clss, args)</td>
	<td class="summary">Finds an inventory by owner or stored object.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#Inventory.find_object">Inventory.find_object</a>&nbsp;(self, args)</td>
	<td class="summary">Finds an object in the inventory.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#Inventory.get_empty_slot">Inventory.get_empty_slot</a>&nbsp;(self)</td>
	<td class="summary">Gets the first empty slot in the inventory.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#Inventory.get_object">Inventory.get_object</a>&nbsp;(self, args)</td>
	<td class="summary">Gets an object in a slot.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#Inventory.merge_object">Inventory.merge_object</a>&nbsp;(self, args)</td>
	<td class="summary">Intelligently adds an object to the inventory.<br/> If no slot number is specified explicitly, loops through all objects in the inventory, trying to merge the object with each of them, returning after the first successful merge.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#Inventory.new">Inventory.new</a>&nbsp;(clss, args)</td>
	<td class="summary">Creates a new inventory.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#Inventory.set_object">Inventory.set_object</a>&nbsp;(self, args)</td>
	<td class="summary">Sets the object of a slot.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#Inventory.subscribe">Inventory.subscribe</a>&nbsp;(self, args)</td>
	<td class="summary">Subscribes an object to the inventory.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#Inventory.subscribed">Inventory.subscribed</a>&nbsp;(self, args)</td>
	<td class="summary">Checks if an object is subscribed to the inventory.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#Inventory.unsubscribe">Inventory.unsubscribe</a>&nbsp;(self, args)</td>
	<td class="summary">Unsubscribes an object from the inventory.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#Inventory.update_slot">Inventory.update_slot</a>&nbsp;(self, args)</td>
	<td class="summary">Emits a slot update event.</br> A private inventory-changed event is always sent to the subscibers.</td>
	</tr>

</table>




<h2>Tables</h2>
<table class="table_list">

	<tr>
	<td class="name" nowrap><a href="#Inventory">Inventory</a></td>
	<td class="summary">Combined inventory and equipment item storage.<br/> A generic inventory class that allows one to easily store and retrieve items.</td>
	</tr>

</table>



<br/>
<br/>




<h2><a name="functions"></a>Functions</h2>
<dl class="function">



<dt><a name="Inventory.find"></a><strong>Inventory.find</strong>&nbsp;(clss, args)</dt>
<dd>
Finds an inventory by owner or stored object.


<h3>Parameters</h3>
<ul>
	
	<li>
	  clss: Inventory class.
	</li>
	
	<li>
	  args: Arguments.<ul> <li>id: Inventory ID.</li> <li>object: Stored object.</li></ul>
	</li>
	
</ul>






<h3>Return value:</h3>
Inventory or nil.



</dd>




<dt><a name="Inventory.find_object"></a><strong>Inventory.find_object</strong>&nbsp;(self, args)</dt>
<dd>
Finds an object in the inventory.


<h3>Parameters</h3>
<ul>
	
	<li>
	  self: Inventory.
	</li>
	
	<li>
	  args: Arguments.<ul> <li>name: Item name to match.</li> <li>object: Object to match.</li> <li>type: Item category name to match.</li></ul>
	</li>
	
</ul>






<h3>Return value:</h3>
Object and slot name or number, or nil if not found.



</dd>




<dt><a name="Inventory.get_empty_slot"></a><strong>Inventory.get_empty_slot</strong>&nbsp;(self)</dt>
<dd>
Gets the first empty slot in the inventory.


<h3>Parameters</h3>
<ul>
	
	<li>
	  self: Inventory.
	</li>
	
</ul>








</dd>




<dt><a name="Inventory.get_object"></a><strong>Inventory.get_object</strong>&nbsp;(self, args)</dt>
<dd>
Gets an object in a slot.


<h3>Parameters</h3>
<ul>
	
	<li>
	  self: Inventory.
	</li>
	
	<li>
	  args: Arguments.<ul> <li>slot: Slot index.</li></ul>
	</li>
	
</ul>






<h3>Return value:</h3>
Object or nil.



</dd>




<dt><a name="Inventory.merge_object"></a><strong>Inventory.merge_object</strong>&nbsp;(self, args)</dt>
<dd>
Intelligently adds an object to the inventory.<br/> If no slot number is specified explicitly, loops through all objects in the inventory, trying to merge the object with each of them, returning after the first successful merge. If no merge succeeds, tries to add the object to the first empty slot. If there are no empty slots, returns without adding the object.<br/> If an explicit slot number is requested, checks if the slot is empty. If so, the object is added. Otherwise, a merge is attempted. If the merge fails, the function returns without adding the object.<br/> Note that merging and thus this function as well only works for objects. If the inserted object or the object in the requested slot is nil, nothing is done.


<h3>Parameters</h3>
<ul>
	
	<li>
	  self: Inventory.
	</li>
	
	<li>
	  args: Arguments.<ul> <li>equip: True to auto-equip if possible.</li> <li>exclude: Slot number to exclude.</li> <li>object: Object.</li> <li>slot: Slot name or number if requiring a specific slot.</li></ul>
	</li>
	
</ul>






<h3>Return value:</h3>
True if merged or added.



</dd>




<dt><a name="Inventory.new"></a><strong>Inventory.new</strong>&nbsp;(clss, args)</dt>
<dd>
Creates a new inventory.


<h3>Parameters</h3>
<ul>
	
	<li>
	  clss: Inventory class.
	</li>
	
	<li>
	  args: Arguments.
	</li>
	
</ul>






<h3>Return value:</h3>
New inventory.



</dd>




<dt><a name="Inventory.set_object"></a><strong>Inventory.set_object</strong>&nbsp;(self, args)</dt>
<dd>
Sets the object of a slot.


<h3>Parameters</h3>
<ul>
	
	<li>
	  self: Inventory.
	</li>
	
	<li>
	  args: Arguments.<ul> <li>slot: Slot name or number.</li> <li>object: Object.</li></ul>
	</li>
	
</ul>








</dd>




<dt><a name="Inventory.subscribe"></a><strong>Inventory.subscribe</strong>&nbsp;(self, args)</dt>
<dd>
Subscribes an object to the inventory.


<h3>Parameters</h3>
<ul>
	
	<li>
	  self: Inventory.
	</li>
	
	<li>
	  args: Arguments.<ul> <li>callback: Callback.</li> <li>object: Object to subscribe.</li></ul>
	</li>
	
</ul>








</dd>




<dt><a name="Inventory.subscribed"></a><strong>Inventory.subscribed</strong>&nbsp;(self, args)</dt>
<dd>
Checks if an object is subscribed to the inventory.


<h3>Parameters</h3>
<ul>
	
	<li>
	  self: Inventory.
	</li>
	
	<li>
	  args: Arguments.<ul> <li>object: Object.</li></ul>
	</li>
	
</ul>






<h3>Return value:</h3>
True if subscribed.



</dd>




<dt><a name="Inventory.unsubscribe"></a><strong>Inventory.unsubscribe</strong>&nbsp;(self, args)</dt>
<dd>
Unsubscribes an object from the inventory.


<h3>Parameters</h3>
<ul>
	
	<li>
	  self: Inventory.
	</li>
	
	<li>
	  args: Arguments.<ul> <li>object: Object to unsubscribe.</li></ul>
	</li>
	
</ul>








</dd>




<dt><a name="Inventory.update_slot"></a><strong>Inventory.update_slot</strong>&nbsp;(self, args)</dt>
<dd>
Emits a slot update event.</br> A private inventory-changed event is always sent to the subscibers. If the slot was a string, a public vision event is also send to nearby objects as if they saw an item being equipped or unequipped.</br> If there are no subscribers and the Vision class hasn't been loaded, the function does nothing, hence making the class usable to both the client and the server.


<h3>Parameters</h3>
<ul>
	
	<li>
	  self: Inventory.
	</li>
	
	<li>
	  args: Arguments.<ul> <li>slot: Slot number or name.</li></ul>
	</li>
	
</ul>








</dd>


</dl>




<h2><a name="tables"></a>Tables</h2>
<dl class="table">

<dt><a name="Inventory"></a><strong>Inventory</strong></dt>
<dd>Combined inventory and equipment item storage.<br/> A generic inventory class that allows one to easily store and retrieve items. Both objects and strings are supported as items so the class is usable to both the client and the server.



</dd>


</dl>




</div> <!-- id="content" -->

</div> <!-- id="main" -->

<div id="about">
	<p><a href="http://validator.w3.org/check?uri=referer"><img src="http://www.w3.org/Icons/valid-xhtml10" alt="Valid XHTML 1.0!" height="31" width="88" /></a></p>
</div> <!-- id="about" -->

</div> <!-- id="container" -->	
</body>
</html>
